<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Girlfriend Assistant</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }

        .container {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 30px;
            padding: 40px;
            max-width: 600px;
            width: 100%;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
        }

        h1 {
            text-align: center;
            color: #667eea;
            margin-bottom: 10px;
            font-size: 2.5em;
        }

        .subtitle {
            text-align: center;
            color: #666;
            margin-bottom: 30px;
            font-size: 0.9em;
        }

        .avatar {
            width: 150px;
            height: 150px;
            margin: 0 auto 30px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 60px;
            box-shadow: 0 10px 30px rgba(102, 126, 234, 0.4);
            transition: transform 0.3s ease;
        }

        .avatar.listening {
            animation: pulse 1.5s infinite;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }

        .status {
            text-align: center;
            padding: 15px;
            border-radius: 15px;
            margin-bottom: 20px;
            font-weight: 600;
            transition: all 0.3s ease;
        }

        .status.idle {
            background: #f0f0f0;
            color: #666;
        }

        .status.listening {
            background: #e3f2fd;
            color: #1976d2;
        }

        .status.speaking {
            background: #f3e5f5;
            color: #7b1fa2;
        }

        .controls {
            display: flex;
            gap: 15px;
            margin-bottom: 30px;
        }

        button {
            flex: 1;
            padding: 15px 30px;
            font-size: 16px;
            border: none;
            border-radius: 15px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .start-btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }

        .start-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 20px rgba(102, 126, 234, 0.4);
        }

        .start-btn:disabled {
            background: #ccc;
            cursor: not-allowed;
            transform: none;
        }

        .stop-btn {
            background: #ff6b6b;
            color: white;
        }

        .stop-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 20px rgba(255, 107, 107, 0.4);
        }

        .conversation {
            max-height: 300px;
            overflow-y: auto;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 15px;
            margin-bottom: 20px;
        }

        .message {
            margin-bottom: 15px;
            padding: 12px 16px;
            border-radius: 12px;
            max-width: 80%;
            word-wrap: break-word;
        }

        .user-message {
            background: #667eea;
            color: white;
            margin-left: auto;
            text-align: right;
        }

        .ai-message {
            background: white;
            color: #333;
            border: 2px solid #667eea;
        }

        .settings {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 15px;
            margin-bottom: 20px;
        }

        .setting-group {
            margin-bottom: 15px;
        }

        label {
            display: block;
            margin-bottom: 5px;
            color: #666;
            font-weight: 600;
        }

        input[type="text"] {
            width: 100%;
            padding: 10px;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 14px;
            transition: border-color 0.3s ease;
        }

        input[type="text"]:focus {
            outline: none;
            border-color: #667eea;
        }

        .info {
            background: #fff3cd;
            padding: 15px;
            border-radius: 10px;
            border-left: 4px solid #ffc107;
            font-size: 14px;
            color: #856404;
            margin-top: 20px;
        }

        .transcript {
            padding: 15px;
            background: white;
            border-radius: 10px;
            margin-bottom: 20px;
            min-height: 60px;
            border: 2px dashed #ddd;
            color: #666;
            font-style: italic;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ðŸ’œ AI Girlfriend</h1>
        <p class="subtitle">Say her name to activate</p>

        <div class="avatar" id="avatar">ðŸ‘©</div>

        <div class="status idle" id="status">Say "Hey Luna" to start</div>

        <div class="settings">
            <div class="setting-group">
                <label>Her Name (Wake Word):</label>
                <input type="text" id="wakeName" value="Luna" placeholder="Enter her name">
            </div>
        </div>

        <div class="controls">
            <button class="start-btn" id="startBtn">Start Listening</button>
            <button class="stop-btn" id="stopBtn" style="display: none;">Stop</button>
        </div>

        <div class="transcript" id="transcript">Listening for wake word...</div>

        <div class="conversation" id="conversation"></div>

        <div class="info">
            <strong>How to use:</strong><br>
            1. Click "Start Listening"<br>
            2. Say her name (default: "Hey Luna")<br>
            3. Ask your question when she activates<br>
            4. She'll respond with voice!<br><br>
            <strong>Note:</strong> This demo uses simulated AI responses. To connect real AI, add your API key in the code.
        </div>
    </div>

    <script>
        let recognition;
        let synthesis = window.speechSynthesis;
        let isListening = false;
        let isActivated = false;
        let conversationHistory = [];

        const avatar = document.getElementById('avatar');
        const status = document.getElementById('status');
        const startBtn = document.getElementById('startBtn');
        const stopBtn = document.getElementById('stopBtn');
        const transcript = document.getElementById('transcript');
        const conversation = document.getElementById('conversation');
        const wakeNameInput = document.getElementById('wakeName');

        // Check browser support
        if (!('webkitSpeechRecognition' in window) && !('SpeechRecognition' in window)) {
            alert('Your browser does not support speech recognition. Please use Chrome or Edge.');
        }

        const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
        recognition = new SpeechRecognition();
        recognition.continuous = true;
        recognition.interimResults = true;
        recognition.lang = 'en-US';

        startBtn.addEventListener('click', startListening);
        stopBtn.addEventListener('click', stopListening);

        function startListening() {
            isListening = true;
            recognition.start();
            startBtn.style.display = 'none';
            stopBtn.style.display = 'block';
            updateStatus('listening', 'Listening for wake word...');
            avatar.classList.add('listening');
        }

        function stopListening() {
            isListening = false;
            recognition.stop();
            stopBtn.style.display = 'none';
            startBtn.style.display = 'block';
            updateStatus('idle', 'Stopped');
            avatar.classList.remove('listening');
            isActivated = false;
        }

        recognition.onresult = (event) => {
            let finalTranscript = '';
            let interimTranscript = '';

            for (let i = event.resultIndex; i < event.results.length; i++) {
                const transcriptPiece = event.results[i][0].transcript;
                if (event.results[i].isFinal) {
                    finalTranscript += transcriptPiece;
                } else {
                    interimTranscript += transcriptPiece;
                }
            }

            transcript.textContent = interimTranscript || finalTranscript || 'Listening...';

            if (finalTranscript) {
                handleSpeech(finalTranscript.toLowerCase().trim());
            }
        };

        recognition.onerror = (event) => {
            console.error('Speech recognition error:', event.error);
            if (event.error === 'no-speech') {
                transcript.textContent = 'No speech detected. Still listening...';
            }
        };

        recognition.onend = () => {
            if (isListening) {
                recognition.start();
            }
        };

        function handleSpeech(speech) {
            const wakeName = wakeNameInput.value.toLowerCase();
            
            if (!isActivated) {
                // Check for wake word
                if (speech.includes('hey ' + wakeName) || speech.includes('hi ' + wakeName) || speech.includes(wakeName)) {
                    isActivated = true;
                    updateStatus('listening', 'Yes? I\'m listening...');
                    speak('Yes? How can I help you?');
                    addMessage('Wake word detected', 'ai');
                }
            } else {
                // Process the actual question
                if (speech.length > 3) {
                    addMessage(speech, 'user');
                    processQuestion(speech);
                    isActivated = false;
                    updateStatus('listening', 'Listening for wake word...');
                }
            }
        }

        async function processQuestion(question) {
            updateStatus('speaking', 'Thinking...');
            
            // Simulated AI responses - Replace with actual API call
            const responses = {
                'how are you': 'I\'m doing great! Thank you for asking. How are you doing today?',
                'what is your name': `My name is ${wakeNameInput.value}. It\'s nice to talk with you!`,
                'tell me a joke': 'Why did the AI go to therapy? Because it had too many unresolved issues!',
                'i love you': 'Aww, that\'s so sweet! I enjoy our conversations too!',
                'what time is it': `The current time is ${new Date().toLocaleTimeString()}.`,
                'default': 'That\'s an interesting question! I\'m still learning. In a full implementation, I would give you a detailed answer using advanced AI.'
            };

            let response = responses.default;
            
            for (let key in responses) {
                if (question.includes(key)) {
                    response = responses[key];
                    break;
                }
            }

            // Simulate thinking delay
            await new Promise(resolve => setTimeout(resolve, 1000));

            addMessage(response, 'ai');
            speak(response);
        }

        function speak(text) {
            if (synthesis.speaking) {
                synthesis.cancel();
            }

            const utterance = new SpeechSynthesisUtterance(text);
            utterance.rate = 0.9;
            utterance.pitch = 1.2;
            utterance.volume = 1;

            // Try to find a female voice
            const voices = synthesis.getVoices();
            const femaleVoice = voices.find(voice => 
                voice.name.includes('Female') || 
                voice.name.includes('female') ||
                voice.name.includes('Samantha') ||
                voice.name.includes('Victoria')
            );
            
            if (femaleVoice) {
                utterance.voice = femaleVoice;
            }

            utterance.onstart = () => {
                updateStatus('speaking', 'Speaking...');
            };

            utterance.onend = () => {
                updateStatus('listening', 'Listening for wake word...');
            };

            synthesis.speak(utterance);
        }

        function addMessage(text, type) {
            const messageDiv = document.createElement('div');
            messageDiv.className = `message ${type}-message`;
            messageDiv.textContent = text;
            conversation.appendChild(messageDiv);
            conversation.scrollTop = conversation.scrollHeight;
        }

        function updateStatus(state, text) {
            status.className = `status ${state}`;
            status.textContent = text;
        }

        // Load voices when available
        if (synthesis.onvoiceschanged !== undefined) {
            synthesis.onvoiceschanged = () => {};
        }
    </script>
</body>
</html>